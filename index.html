<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curb & Adapter Configuration System</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #f5f5f5;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header-title {
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        .top-nav {
            background-color: #eaeaea;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            border-radius: 4px;
        }
        .top-nav button {
            background-color: #2c3e50;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        .step-indicator {
            background-color: #fff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .step-indicator h3 {
            margin-top: 0;
        }
        .step-options {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        .step-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .configuration-panel {
            background-color: #fff;
            padding: 20px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .config-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .config-item {
            flex: 1;
            min-width: 200px;
        }
        .config-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 14px;
        }
        .config-item select, 
        .config-item input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .dimensions-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .dimension-inputs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .dimension-input {
            flex: 1;
            min-width: 120px;
        }
        .dimension-input label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 14px;
        }
        .dimension-input input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .action-bar {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
        }
        .action-button {
            background-color: #2c3e50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .shipping-button {
            background-color: #e74c3c;
            margin-left: 10px;
        }
        .quote-number {
            font-weight: bold;
            color: #2c3e50;
        }
        .tab-container {
            margin-top: 20px;
        }
        .tab-header {
            display: flex;
            background-color: #eee;
            border-radius: 4px 4px 0 0;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #eee;
            border: none;
        }
        .tab.active {
            background-color: white;
            border-bottom: 2px solid #2c3e50;
            font-weight: bold;
        }
        .tab-content {
            background-color: white;
            padding: 20px;
            border-radius: 0 0 4px 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <header>
        <h2 class="header-title">HVAC Solutions Inc.</h2>
        <div>
            <span style="margin-right: 20px;">Project: UC10.2</span>
            <span>User: John Doe</span>
        </div>
    </header>

    <div class="container">
        <div class="top-nav">
            <div>
                <span>Project Schedule</span> | 
                <span>Project Name: UC10.2</span>
            </div>
            <div>
                <button>Project Phase</button>
                <button>Project Info</button>
                <button>User</button>
                <button>Quotes</button>
                <button>Orders</button>
                <button>Support Request</button>
                <button>Activities</button>
            </div>
        </div>

        <div class="step-indicator">
            <h3>Configure Product</h3>
            <div class="step-options">
                <div class="step-option">
                    <input type="radio" id="option1" name="config-option" checked>
                    <label for="option1">By Curb Dimensions</label>
                </div>
                <div class="step-option">
                    <input type="radio" id="option2" name="config-option">
                    <label for="option2">By Product Model #</label>
                </div>
                <div class="step-option">
                    <input type="radio" id="option3" name="config-option">
                    <label for="option3">By Existing Model #</label>
                </div>
            </div>
        </div>

        <div class="configuration-panel">
            <div class="config-row">
                <div class="config-item">
                    <label for="brand">Brand</label>
                    <select id="brand">
                        <option value="XYZ">XYZ</option>
                        <option value="ABC">ABC</option>
                        <option value="DEF">DEF</option>
                    </select>
                </div>
                <div class="config-item">
                    <label for="product-model">Product Model #</label>
                    <select id="product-model">
                        <option value="UC10.2">UC10.2</option>
                        <option value="UC15.4">UC15.4</option>
                        <option value="UC20.6">UC20.6</option>
                    </select>
                </div>
                <div class="config-item">
                    <label for="duct-support">Duct Support</label>
                    <select id="duct-support">
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            </div>

            <div class="config-row">
                <div class="config-item">
                    <label for="tag">Tag</label>
                    <input type="text" id="tag" placeholder="Enter tag">
                </div>
                <div class="config-item">
                    <label for="pitch">Pitch (in/ft)</label>
                    <select id="pitch">
                        <option value="no-pitch">No Pitch</option>
                        <option value="1-4">1/4</option>
                        <option value="1-2">1/2</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="dimensions-section">
            <h3>Dimensions and Weight</h3>
            <div class="dimension-inputs">
                <div class="dimension-input">
                    <label for="width">A - Width (in)</label>
                    <input type="number" id="width" value="42.13" step="0.01">
                </div>
                <div class="dimension-input">
                    <label for="length">B - Length (in) [Inside side]</label>
                    <input type="number" id="length" value="42.13" step="0.01">
                </div>
                <div class="dimension-input">
                    <label for="height">C - Height (in)</label>
                    <select id="height">
                        <option value="14">14</option>
                        <option value="18">18</option>
                        <option value="24">24</option>
                    </select>
                </div>
                <div class="dimension-input">
                    <label for="top-flange">Top Flange (in)</label>
                    <input type="number" id="top-flange" value="1.5" step="0.1">
                </div>
                <div class="dimension-input">
                    <label for="weight">Unit Weight (lbs)</label>
                    <input type="number" id="weight" value="85" step="1">
                </div>
            </div>

            <div class="config-row" style="margin-top: 20px;">
                <div class="config-item">
                    <label for="insulated-curb">Insulated Curb</label>
                    <select id="insulated-curb">
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
                <div class="config-item">
                    <label for="curb-type">Curb Type</label>
                    <select id="curb-type">
                        <option value="MBC1">MBC1</option>
                        <option value="MBC3">MBC3</option>
                        <option value="MBC7">MBC7</option>
                        <option value="MBC7-3Piece">MBC7-3 Piece</option>
                        <option value="Butler-IF">Butler IF</option>
                        <option value="MBC10">MBC10</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="action-bar">
            <div>
                <span>Quote Number: </span>
                <span class="quote-number" id="quote-number">Q-230587</span>
            </div>
            <div>
                <button class="action-button">Save Configuration</button>
                <button class="action-button shipping-button" id="calculate-shipping">Calculate Shipping</button>
            </div>
        </div>

        <div class="tab-container">
            <div class="tab-header">
                <button class="tab active">Summary</button>
                <button class="tab">Specifications</button>
                <button class="tab">Documents</button>
                <button class="tab">Shipping</button>
            </div>
            <div class="tab-content">
                <p>Configuration Summary:</p>
                <ul>
                    <li>Product: UC10.2 Curb</li>
                    <li>Dimensions: 42.13" × 42.13" × 14"</li>
                    <li>Weight: 85 lbs</li>
                    <li>Type: MBC1</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('calculate-shipping').addEventListener('click', function() {
            // Get dimensions and weight
            const width = document.getElementById('width').value;
            const length = document.getElementById('length').value;
            const height = document.getElementById('height').value;
            const weight = document.getElementById('weight').value;
            const curbType = document.getElementById('curb-type').value;
            const quoteNumber = document.getElementById('quote-number').textContent;
            
            // Create data object to pass to shipping calculator
            const shippingData = {
                width: width,
                length: length,
                height: height,
                weight: weight,
                curbType: curbType,
                quoteNumber: quoteNumber
            };
            
            // Convert data to query parameters
            const queryParams = new URLSearchParams();
            for (const [key, value] of Object.entries(shippingData)) {
                queryParams.append(key, value);
            }
            
            // Open new window with shipping calculator using the hosted URL
            const calculatorWindow = window.open('https://ytimshina.github.io/ShippingCals-c/?' + queryParams.toString(), 
                'ShippingCalculator', 
                'width=1200,height=800');
                
            // Set up message listener for receiving data back from calculator
            window.addEventListener('message', function(event) {
                // Verify the origin for security
                // In production, you would check against your actual calculator domain
                if (event.origin !== 'https://ytimshina.github.io') {
                    console.log('Received message from unexpected origin:', event.origin);
                    return;
                }
                
                if (event.data && event.data.shippingCost) {
                    // Handle the shipping cost data returned from calculator
                    const shippingCost = event.data.shippingCost;
                    const shippingType = event.data.shippingType || 'Standard Freight';
                    
                    // Show alert with calculated cost
                    alert('Shipping calculation complete!\n\nType: ' + shippingType + '\nCost: $' + shippingCost);
                    
                    // Update the shipping tab or display the cost elsewhere
                    const tabContent = document.querySelector('.tab-content');
                    
                    // Create shipping summary
                    const shippingInfo = document.createElement('div');
                    shippingInfo.innerHTML = `
                        <h3>Shipping Details</h3>
                        <p><strong>Quote Number:</strong> ${quoteNumber}</p>
                        <p><strong>Shipping Type:</strong> ${shippingType}</p>
                        <p><strong>Calculated Shipping Cost:</strong> $${shippingCost}</p>
                        <p><strong>Dimensions:</strong> ${width}" × ${length}" × ${height}"</p>
                        <p><strong>Weight:</strong> ${weight} lbs</p>
                        <p><strong>Curb Type:</strong> ${curbType}</p>
                    `;
                    
                    // Clear existing content and add shipping info
                    tabContent.innerHTML = '';
                    tabContent.appendChild(shippingInfo);
                    
                    // Switch to the Shipping tab
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab')[3].classList.add('active');
                }
            }, false);
        });
        
        // Tab functionality
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach((tab, index) => {
            tab.addEventListener('click', function() {
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Update tab content based on selected tab
                const tabContent = document.querySelector('.tab-content');
                
                switch(index) {
                    case 0: // Summary
                        tabContent.innerHTML = `
                            <p>Configuration Summary:</p>
                            <ul>
                                <li>Product: ${document.getElementById('product-model').value} Curb</li>
                                <li>Dimensions: ${document.getElementById('width').value}" × ${document.getElementById('length').value}" × ${document.getElementById('height').value}"</li>
                                <li>Weight: ${document.getElementById('weight').value} lbs</li>
                                <li>Type: ${document.getElementById('curb-type').value}</li>
                            </ul>
                        `;
                        break;
                    case 1: // Specifications
                        tabContent.innerHTML = `
                            <p>Product Specifications:</p>
                            <ul>
                                <li>Material: Galvanized Steel</li>
                                <li>Insulation: ${document.getElementById('insulated-curb').value === 'yes' ? 'Yes' : 'No'}</li>
                                <li>Top Flange Width: ${document.getElementById('top-flange').value}"</li>
                                <li>Max Load Capacity: 750 lbs</li>
                            </ul>
                        `;
                        break;
                    case 2: // Documents
                        tabContent.innerHTML = `
                            <p>Available Documents:</p>
                            <ul>
                                <li><a href="#" onclick="alert('Document would download here')">Installation Manual</a></li>
                                <li><a href="#" onclick="alert('Document would download here')">Product Specifications</a></li>
                                <li><a href="#" onclick="alert('Document would download here')">Warranty Information</a></li>
                            </ul>
                        `;
                        break;
                    case 3: // Shipping
                        tabContent.innerHTML = `
                            <p>No shipping information available yet.</p>
                            <p>Click "Calculate Shipping" to determine freight costs.</p>
                        `;
                        break;
                }
            });
        });
    </script>
</body>
</html>
